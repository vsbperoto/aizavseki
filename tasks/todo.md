# AiZaVseki — Task List

## Completed
- [x] Project initialization (Next.js 16, TypeScript, Tailwind v4)
- [x] Design system (CSS variables, glassmorphism, gradients)
- [x] UI components (Button, Card, Input, Badge, Skeleton, ScrollReveal, etc.)
- [x] Layout components (Navbar, Footer, PageTransition)
- [x] Supabase client integration (client.ts, server.ts, types.ts, middleware.ts)
- [x] Home page with all 8 sections
- [x] Blog system (listing, detail, filters, content renderer)
- [x] Core pages (About, Newsletter, Contact, Resources)
- [x] Legal pages (Privacy Policy, Terms of Service, Data Deletion)
- [x] API routes (data-deletion, newsletter, contact, webhook/content)
- [x] SEO (sitemap, robots, 404, loading)
- [x] Production build passing (0 errors)
- [x] Create Supabase project + configure credentials
- [x] Run database migration (5 tables + RLS)
- [x] Update .env.local with real Supabase credentials
- [x] Test dev server with live Supabase
- [x] Initial git commit (2d9d8ad)
- [x] Facebook OAuth admin panel — SQL migration, types, OAuth helpers, session encryption, 5 API routes, admin dashboard
- [x] LLMO/GEO Content Pipeline — types, webhook upgrade, PostContent markdown, FaqSection, key_takeaway box, triple JSON-LD, react-markdown
- [x] n8n workflow created (AiZaVseki LLMO Content Pipeline v2 — ID: Rs3zNLx8hSSTgw47)
- [x] Run `tasks/migrations/add_llmo_columns.sql` in Supabase (4 new post columns) — done via MCP
- [x] Fix n8n workflow: replace `fetch()` with `this.helpers.httpRequest()` + Cloudinary upload
- [x] Fix n8n workflow: add `continueOnFail` on Generate Image node
- [x] Content Pipeline v3 — Full LLMO/GEO Overhaul (Phases 1-6):
  - [x] Phase 1: DB migration (trending_topics table + 5 new posts columns) — via Supabase MCP
  - [x] Phase 1: Webhook route updated with new fields (image_alt_text, quality_score, word_count, target_keyword, internal_links_used)
  - [x] Phase 1: Supabase types updated (TrendingTopic type + new Post fields)
  - [x] Phase 2: Grok Scout workflow created (AiZaVseki Topic Scout — ID: J0KAdiRqGkGcp41i)
  - [x] Phase 3: Main pipeline rebuilt to v3 (12 nodes: scout topic + IF + SERP brief + quality review)
  - [x] Phase 4: llms.txt created
  - [x] Phase 4: Sitemap updated with pillar pages + glossary
  - [x] Phase 4: Article JSON-LD enhanced (speakable, dateModified, HowTo for AI_TIPS)
  - [x] Phase 4: Reading time display added
  - [x] Phase 4: image_alt_text wired to blog post + PostContent
  - [x] Phase 4: Organization JSON-LD enhanced (knowsAbout, foundingDate, areaServed)
  - [x] Phase 5: 5 pillar landing pages created (ai-novini, ai-instrumenti, ai-saveti, ai-za-biznes, ai-zabavlenia)
  - [x] Phase 5: Bulgarian AI glossary page (24 terms with DefinedTermSet JSON-LD)
  - [x] Phase 5: AI bot detection middleware (GPTBot, ClaudeBot, PerplexityBot, etc.)
  - [x] Phase 5: Pillar slug mapping added to constants.ts
  - [x] Phase 6: Content type cycling (article/definition/comparison) in Pick Daily Pillar
  - [x] Phase 6: Sonnet Writer prompt updated for content type awareness
  - [x] Build verified: 0 errors, all new routes rendering
- [x] Critical Fix: Scout-first architecture — Get Best Topic queries ANY pillar by relevance/engagement, Pick Daily Pillar moved to FALSE branch only
- [x] Critical Fix: JSON parsing robustness — robust sanitizer (curly quotes, control chars, BOM, regex extraction) + stricter LLM prompts
- [x] IF node `looseTypeValidation: true` for boolean check
- [x] Workflow validated: 0 errors, 14 warnings (all false positives)

## Resources UX Overhaul + SEO Audit (2026-02-10)
- [x] Add emoji icons to RESOURCE_CATEGORIES constants
- [x] Rewrite resources/page.tsx: pagination, search, sort, stats, column selection
- [x] Create Pagination.tsx component
- [x] Create ResourceSearch.tsx component (debounced, client)
- [x] Create ResourceSort.tsx component (4 sort options, client)
- [x] Create ResourceStats.tsx component (clickable type counts)
- [x] Update ResourceCard.tsx: colored borders, quality badge, category emoji
- [x] Update ResourceGrid.tsx: accept count info, result summary
- [x] Update ResourceTypeFilter.tsx: reset page on filter change, category emoji
- [x] Block /admin in robots.ts
- [x] Add CollectionPage JSON-LD to blog listing
- [x] Add AboutPage JSON-LD to about page
- [x] Add DefinedTerm schema for definitions, inLanguage, isPartOf to resource detail
- [x] Write full audit report (tasks/audit-2026-02-10.md)
- [x] Build verified: 0 errors
- [ ] Commit + push to Vercel
- [ ] Verify live site: pagination, search, sort, filters, JSON-LD
- [ ] Submit updated sitemap to Google Search Console

## 333 Resources Seeding
- [x] Create resources table in Supabase (RLS, indexes, FTS)
- [x] Add Resource type + table to types.ts
- [x] Add RESOURCE_CATEGORIES + CONTENT_TYPES constants
- [x] Create /api/webhook/resources endpoint
- [x] Create ResourceCard, ResourceGrid, ResourceTypeFilter components
- [x] Replace /resources page with DB-driven listing
- [x] Create /resources/[slug] detail page
- [x] Update sitemap + llms.txt
- [x] Generate 333-topic map (111 def + 111 howto + 111 comparison)
- [x] Create agent prompt + orchestration scripts
- [x] Build verified: 0 errors
- [x] Git commit + push (`522e8b0`)
- [x] Test webhook with curl after Vercel deploys
- [x] Add Supabase MCP to Codex config for direct DB access
- [x] Update agent-prompt.md with web research + Supabase MCP
- [x] Update seed-orchestrator.sh for Supabase MCP approach
- [x] Create seed-update-existing.sh for Wave 1 fact-checking
- [x] Create CODEX.md project instructions for Codex agents
- [x] Update seed-retry-failed.sh for Supabase MCP approach
- [ ] Wave 1 (topics 1-60): Sonnet agents finish seeding
- [ ] Wave 2 (topics 61-333): Run `./scripts/seed-orchestrator.sh 61 333 6` from WSL
- [ ] Monitor: `./scripts/seed-status.sh`
- [ ] Fact-check Wave 1: `./scripts/seed-update-existing.sh`
- [ ] Retry failures: `./scripts/seed-retry-failed.sh`
- [ ] Verify: `SELECT count(*), content_type FROM resources GROUP BY content_type;` = 111 each
- [ ] Submit updated sitemap to Google Search Console

## Pending — User Configuration Required
- [ ] Configure xAI API key in n8n (for Grok Scout workflow — Header Auth credential)
- [ ] Configure Supabase service role key in n8n Code nodes (Get Scout Topic + Upload & Publish)
- [ ] Configure n8n environment variable: SUPABASE_SERVICE_ROLE_KEY (for Scout workflow Insert to Supabase node)
- [ ] Manual test of Grok Scout workflow (J0KAdiRqGkGcp41i)
- [ ] Manual test of main pipeline v3 (Rs3zNLx8hSSTgw47)
- [ ] Activate both n8n workflows (Scout: every 6h, Pipeline: daily 8AM)
- [ ] ~~Create "images" storage bucket in Supabase~~ — No longer needed (using Cloudinary instead)
- [ ] Configure n8n credentials: Google Gemini API key + Anthropic API key
- [ ] Run `supabase-migration-facebook-tokens.sql` in Supabase SQL Editor
- [ ] Fill env vars: META_APP_ID, META_APP_SECRET, ADMIN_SECRET, ADMIN_FACEBOOK_ID
- [ ] Add OAuth redirect URIs in Facebook App settings
- [ ] Test full OAuth flow end-to-end
- [ ] Create OG image (1200x630)
- [ ] Deploy to Vercel
- [ ] Configure custom domain (aizavseki.eu)
- [ ] Submit Meta app for review with legal page URLs
- [x] Git commit and push v3 changes — `fc7cc43`, pushed to origin/master
